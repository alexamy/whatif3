// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Jq from "../../lib/Jq.res.mjs";
import * as $$Screen from "../Screen.res.mjs";
import * as Switch from "./Switch.res.mjs";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as JsxRuntime from "react/jsx-runtime";

var paths = [
  [
    "Подойти к столу",
    "Table"
  ],
  [
    "Подойти к окну",
    "Window"
  ],
  [
    "Подойти к двери",
    "Door"
  ]
];

var space = " ";

function Content$Room(props) {
  var goTo = props.goTo;
  var note1 = Switch.Toggle.useSwitch(undefined);
  var options = Belt_Array.map(paths, (function (param) {
          var place = param[1];
          return [
                  param[0],
                  (function () {
                      goTo(place);
                    })
                ];
        }));
  var content = JsxRuntime.jsxs(JsxRuntime.Fragment, {
        children: [
          "Вы стоите посреди комнаты. На вашей руке - умные часы. Вы используете их для записи и чтения заметок.",
          space,
          note1.link("Читать заметку."),
          note1.content(JsxRuntime.jsx("p", {
                    children: "\"Привет, мир!\""
                  }))
        ]
      });
  return JsxRuntime.jsx($$Screen.make, {
              content: content,
              options: options
            });
}

var Room = {
  computer: "Watch",
  paths: paths,
  space: space,
  make: Content$Room
};

function useSwitch(link, content, initialOpt) {
  var initial = initialOpt !== undefined ? initialOpt : "Unvisited";
  var state = {
    contents: initial
  };
  var update = function (newState) {
    state.contents = newState;
    if (newState === "Visited") {
      var text = Jq.getText(link);
      Jq.replaceWith(link, Jq.string(text));
      Jq.show(content);
      return ;
    }
    Jq.hide(content);
  };
  update(initial);
  return {
          link: link,
          content: content,
          toggle: update
        };
}

var SwitchD = {
  useSwitch: useSwitch
};

var note1 = useSwitch(Jq.append(Jq.make("span"), [Jq.string("Читать заметку.")]), Jq.append(Jq.make("span"), [Jq.string("\"Привет, мир!\"")]), undefined);

setTimeout((function () {
        note1.toggle("Visited");
      }), 2000);

function render() {
  return Jq.append(Jq.make("div"), [
              Jq.string("Вы стоите посреди комнаты. На вашей руке - умные часы. Вы используете их для записи и чтения заметок."),
              Jq.Dom.space(),
              note1.link,
              Jq.Dom.newline(),
              note1.content
            ]);
}

var RoomD = {
  note1: note1,
  render: render
};

var screens = [
  {
    place: "Table",
    computer: "Watch",
    description: "Вы стоите у стола. На столе в беспорядке лежат заметки, ручки, бумажки и прочие предметы.",
    options: [[
        "Вернуться",
        "Room"
      ]]
  },
  {
    place: "Window",
    computer: "Watch",
    description: "Вы стоите у окна. За окном - улица, на которой виднеются машины и люди.",
    options: [[
        "Вернуться",
        "Room"
      ]]
  },
  {
    place: "Door",
    computer: "Door",
    description: "Вы стоите у двери. На двери надпись: \"Выход\", а также электронный код-замок. Дверь заперта.",
    options: [[
        "Вернуться",
        "Room"
      ]]
  }
];

export {
  Room ,
  SwitchD ,
  RoomD ,
  screens ,
}
/* note1 Not a pure module */
