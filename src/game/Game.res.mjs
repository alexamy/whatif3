// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as $$Screen from "./Screen.res.mjs";
import * as JsxRuntime from "react/jsx-runtime";

function useTick(ms) {
  var match = React.useState(function () {
        return true;
      });
  var setTick = match[1];
  React.useEffect((function () {
          var intervalId = setInterval((function () {
                  setTick(function (prev) {
                        return !prev;
                      });
                }), ms);
          return (function () {
                    clearInterval(intervalId);
                  });
        }), []);
  return match[0];
}

function useTerminal(size) {
  
}

function getAllButLast(str) {
  return str.slice(0, str.length - 1 | 0);
}

function Game$Terminal(props) {
  var tick = useTick(400);
  var match = React.useState(function () {
        return false;
      });
  var setFocused = match[1];
  var match$1 = React.useState(function () {
        return "";
      });
  var setMessage = match$1[1];
  var input = "> " + match$1[0] + (
    tick && match[0] ? "â–ˆ" : ""
  );
  var onKeyDown = function (e) {
    var key = e.key;
    if (key === "Backspace") {
      return setMessage(function (prev) {
                  return getAllButLast(prev);
                });
    } else if (key.length === 1) {
      return setMessage(function (prev) {
                  return prev + key;
                });
    } else {
      return ;
    }
  };
  return JsxRuntime.jsx("div", {
              children: JsxRuntime.jsx("div", {
                    children: input
                  }),
              className: "outline-0 whitespace-pre text-nowrap font-mono bg-blue-400 text-gray-800 w-96 h-96 p-2 mx-2 flex flex-col justify-end ",
              tabIndex: 0,
              onKeyDown: onKeyDown,
              onFocus: (function (param) {
                  setFocused(function (param) {
                        return true;
                      });
                }),
              onBlur: (function (param) {
                  setFocused(function (param) {
                        return false;
                      });
                }),
              onClick: (function (param) {
                  setFocused(function (param) {
                        return true;
                      });
                })
            });
}

var Terminal = {
  useTick: useTick,
  useTerminal: useTerminal,
  getAllButLast: getAllButLast,
  make: Game$Terminal
};

function Game(props) {
  var match = React.useState(function () {
        return false;
      });
  var setShown = match[1];
  return JsxRuntime.jsxs("div", {
              children: [
                JsxRuntime.jsx($$Screen.make, {
                      content: JsxRuntime.jsx("p", {
                            children: "You are hearing strange letters: B Y M N."
                          }),
                      options: [[
                          "Go back",
                          (function () {
                              setShown(function (prev) {
                                    return !prev;
                                  });
                            })
                        ]]
                    }),
                JsxRuntime.jsx(Game$Terminal, {})
              ],
              className: "flex"
            });
}

var make = Game;

export {
  Terminal ,
  make ,
}
/* react Not a pure module */
